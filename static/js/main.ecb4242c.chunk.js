(this["webpackJsonpcoronavirus-charts"]=this["webpackJsonpcoronavirus-charts"]||[]).push([[0],{33:function(e,t,a){e.exports=a(70)},38:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadDataAction",(function(){return y})),a.d(n,"changeActiveTab",(function(){return v})),a.d(n,"openCountryDetailAction",(function(){return C})),a.d(n,"addCountryToComparisonAction",(function(){return b})),a.d(n,"removeCountryFromComparisonAction",(function(){return E})),a.d(n,"updateChartThresholdAction",(function(){return A}));var r=a(0),o=a.n(r),c=a(13),s=a.n(c),i=(a(38),a(3)),l=a(5),u=a(6),d=a(8),h=a(9),p=a(15),m=a(30),f=a.n(m),y=function(){return function(e){f.a.get("https://pomber.github.io/covid19/timeseries.json").then((function(t){var a=t.data;e({type:"LOAD_DATA_REQUEST",data:a})})).catch((function(e){console.log(e),alert("Error on loading data")}))}},v=function(e){return function(t){t({type:"CHANGE_ACTIVE_TAB",activeTab:e})}},C=function(e){return function(t){t({type:"CHANGE_ACTIVE_TAB",activeTab:2,selectedCountry:e})}},b=function(e){return function(t){t({type:"ADD_COUNTRY_TO_COMPARISON",country:e})}},E=function(e){return function(t){t({type:"REMOVE_COUNTRY_FROM_COMPARISON",country:e})}},A=function(e){return function(t){t({type:"UPDATE_CHART_THRESHOLD",newThreshold:e})}},T=a(4),g=(a(61),a(19)),O=a(2),x=(a(65),function(e){return o.a.createElement("button",{title:"Add to comparison",className:"add-button",onClick:e.onClick},"+")}),j=(a(66),function(e){var t=parseInt(e);return isNaN(t)?e:t<0?t.toLocaleString("en-US"):0===t?"":"+"+t.toLocaleString("en-US")}),D=function(e){var t=parseInt(e);return isNaN(t)?e:t.toLocaleString("en-US")},N=[{Header:"Country",accessor:"country"},{Header:"Total cases",accessor:"total.confirmed",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"New cases",accessor:"last.confirmed",Cell:function(e){var t=e.cell;return j(t.value)}},{Header:"Total deaths",accessor:"total.deaths",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"Last deaths",accessor:"last.deaths",Cell:function(e){var t=e.cell;return j(t.value)}},{Header:"Total recovered",accessor:"total.recovered",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"Last recovered",accessor:"last.recovered",Cell:function(e){var t=e.cell;return j(t.value)}},{Header:"Total active",accessor:"total.active",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"Active change",accessor:"last.active",Cell:function(e){var t=e.cell;return j(t.value)}}];function w(e){var t=Object(g.useTable)({columns:N,data:e.data,initialState:{sortBy:[{id:"total.confirmed",desc:!0}]}},g.useSortBy),a=t.getTableProps,n=t.getTableBodyProps,r=t.headerGroups,c=t.rows,s=t.prepareRow;return o.a.createElement(o.a.Fragment,null,o.a.createElement("table",Object.assign({className:"ReactTable"},a()),o.a.createElement("thead",null,r.map((function(e){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return o.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),e.isSorted?e.isSortedDesc?o.a.createElement("span",{className:"sort-asc"}):o.a.createElement("span",{className:"sort-desc"}):"")})))}))),o.a.createElement("tbody",n(),c.map((function(t){return s(t),o.a.createElement("tr",t.getRowProps(),t.cells.map((function(t,a){return 0===a?o.a.createElement("td",t.getCellProps(),o.a.createElement("button",{className:"open-country-button",onClick:function(){return e.openCountryDetailAction(t.row.values.country)}},t.render("Cell")),o.a.createElement(x,{onClick:function(){return e.addCountryToComparisonAction(t.row.values.country)}})):o.a.createElement("td",Object.assign({className:"global-table-column ".concat(0===t.value?"":"global-table-column-"+a)},t.getCellProps()),t.render("Cell"))})))})))),o.a.createElement("br",null))}var k=a(11),_=a.n(k),R=a(14),S=a.n(R),H=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){e.props.onChange(t.target.value)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.selected;return o.a.createElement("div",null,o.a.createElement("select",{defaultValue:a,onChange:this.handleChange},t.map((function(e){return o.a.createElement("option",{key:e},e)}))))}}]),a}(o.a.Component),I=a(32),P=["Russia","Ukraine","Belarus","US","Italy","Israel","China","Spain","Germany"],B=6e4*(new Date).getTimezoneOffset(),U=function(e){return Object.keys(e).forEach((function(t){e[t]=e[t].filter((function(e){return e.confirmed}))})),e},V=function(e){var t=[];return Object.keys(e).forEach((function(a){t.push(L(a,e[a]))})),Object(O.a)(t)},F=function(e){return Object(O.a)(Object.entries(e).map((function(e){return Object(I.a)(e,1)[0]})))},L=function(e,t){var a,n,r=t.slice(-2);return 2===r.length?(a=r[1],n=r[0]):(a=r[0],n={confirmed:0,recovered:0,deaths:0,active:0}),{country:e,total:Object(i.a)({},a,{active:M(a)}),last:{confirmed:a.confirmed-n.confirmed,deaths:a.deaths-n.deaths,recovered:a.recovered-n.recovered,active:M(a)-M(n)}}},M=function(e){return e.confirmed-e.recovered-e.deaths},G=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.filter((function(e){return e.confirmed>n})).map((function(e){var n=[Date.parse(e.date?e.date:"")-B,t(e,a)];return a=e,n}))},W=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.filter((function(e){return e.confirmed>n})).map((function(e,n){var r=[n,t(e,a)];return a=e,r}))},z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChangeCountry=function(e){n.setState({country:e})},n.state={country:e.country},n}return Object(u.a)(a,[{key:"render",value:function(){var e=[{title:{text:"Total Cases"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e){return e.confirmed}))}]},{title:{text:"Daily New Cases"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e,t){return e.confirmed-(t?t.confirmed:0)})),type:"column"}]},{title:{text:"Total cases chart"},xAxis:{type:"datetime"},chart:{type:"column"},plotOptions:{column:{stacking:"normal",pointWidth:10}},series:[{name:"Active",data:G(this.props.data[this.state.country],(function(e){return M(e)}))},{name:"Recovered",data:G(this.props.data[this.state.country],(function(e){return e.recovered})),color:"green"},{name:"Deaths",data:G(this.props.data[this.state.country],(function(e){return e.deaths})),color:"black"}]},{title:{text:"Active Cases"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e){return M(e)}))}]},{title:{text:"Dayly Cases vs Daily Deaths"},xAxis:{type:"datetime",crosshair:!0},yAxis:[{title:{text:"Cases"}},{title:{text:"deaths"},opposite:!0}],series:[{name:"Deaths",data:G(this.props.data[this.state.country],(function(e,t){return e.deaths-(t?t.deaths:0)})),type:"column",color:"black",yAxis:1},{name:"New Cases",data:G(this.props.data[this.state.country],(function(e,t){return e.confirmed-(t?t.confirmed:0)}))}]},{title:{text:"Daily New Deaths"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e,t){return e.deaths-(t?t.deaths:0)})),type:"column"}]},{title:{text:"Daily recovered"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e,t){return e.recovered-(t?t.recovered:0)})),type:"column"}]}],t=0;return o.a.createElement("div",{className:"chart_container"},o.a.createElement(H,{items:this.props.countries,selected:this.state.country,onChange:this.handleChangeCountry}),o.a.createElement("br",null),e.map((function(e){return o.a.createElement(S.a,{key:t++,highcharts:_.a,options:e})})))}}]),a}(o.a.Component),Y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).updateChartThreshold=function(t){var a=parseFloat(t.target.value);isNaN(a)||e.props.updateChartThresholdAction(a)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=0,a=[{title:{text:"Total Cases (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e){return e.confirmed}),e.props.chartThreshold)}})).toArray()},{title:{text:"Daily Cases (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e,t){return e.confirmed-(t?t.confirmed:0)}),e.props.chartThreshold)}})).toArray()},{title:{text:"Active Cases (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e){return M(e)}),e.props.chartThreshold)}})).toArray()},{title:{text:"Daily Deaths (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e,t){return e.deaths-(t?t.deaths:0)}),e.props.chartThreshold)}})).toArray()}];return this.props.countries.isEmpty()?o.a.createElement("h3",null,"Please select countries for comparison on another tabs"):o.a.createElement("div",{className:"chart_container"},this.props.countries.map((function(a){return o.a.createElement("div",{key:t++},o.a.createElement("span",{className:"comparison-county-label"},a),o.a.createElement("button",{title:"Remove country",className:"remove-county-button",onClick:function(){return e.props.removeCountryFromComparisonAction(a)}},o.a.createElement("svg",{width:"8",height:"10",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("line",{x1:"1",y1:"7",x2:"7",y2:"1",stroke:"red",strokeWidth:"1"}),o.a.createElement("line",{x1:"1",y1:"1",x2:"7",y2:"7",stroke:"red",strokeWidth:"1"}))))})),o.a.createElement("br",null),o.a.createElement("span",null,"Zero point"),o.a.createElement("input",{className:"chart-threshold-input",defaultValue:this.props.chartThreshold,onChange:this.updateChartThreshold}),o.a.createElement("span",null,"cases"),o.a.createElement("br",null),a.map((function(e){return o.a.createElement(S.a,{key:t++,highcharts:_.a,options:e})})))}}]),a}(o.a.Component),J=function(e){return o.a.createElement(T.d,{selectedIndex:e.activeTab,onSelect:function(t){return e.changeActiveTab(t)}},o.a.createElement(T.b,null,o.a.createElement(T.a,null,"Global view"),o.a.createElement(T.a,null,"Favorite countries"),o.a.createElement(T.a,null,"Details"),o.a.createElement(T.a,null,"Comparison")),o.a.createElement(T.c,null,o.a.createElement(w,{data:e.globalViewByCountries,openCountryDetailAction:e.openCountryDetailAction,addCountryToComparisonAction:e.addCountryToComparisonAction})),o.a.createElement(T.c,null,o.a.createElement(w,{data:(t=e.globalViewByCountries,t.filter((function(e){return P.includes(e.country)}))),openCountryDetailAction:e.openCountryDetailAction,addCountryToComparisonAction:e.addCountryToComparisonAction})),o.a.createElement(T.c,null,o.a.createElement(z,{countries:e.countries,country:e.selectedCountry,data:e.data})),o.a.createElement(T.c,null,o.a.createElement(Y,{countries:e.comparisonCountries,data:e.data,removeCountryFromComparisonAction:e.removeCountryFromComparisonAction,chartThreshold:e.chartThreshold,updateChartThresholdAction:e.updateChartThresholdAction})));var t},Q=(a(67),function(e){return o.a.createElement("div",{id:"cube-loader"},o.a.createElement("div",{className:"caption"},o.a.createElement("div",{className:"cube-loader"},o.a.createElement("div",{className:"cube loader-1"}),o.a.createElement("div",{className:"cube loader-2"}),o.a.createElement("div",{className:"cube loader-4"}),o.a.createElement("div",{className:"cube loader-3"}))))}),Z=(a(68),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.loadDataAction()}},{key:"render",value:function(){return this.props.initialized?o.a.createElement("div",{className:"App"},o.a.createElement(J,this.props)):o.a.createElement(Q,null)}}]),a}(o.a.Component)),$=Object(i.a)({},n),q=Object(p.b)((function(e){return Object(i.a)({},e)}),$,(function(e,t){return Object(i.a)({},e,{},t)}))(Z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(12),X=a(31),ee={data:Object(O.a)(),countries:Object(O.a)(),globalViewByCountries:Object(O.a)(),initialized:!1,activeTab:0,chartThreshold:100,selectedCountry:"Russia",comparisonCountries:Object(O.a)()},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATA_REQUEST":return Object(i.a)({},e,{data:U(t.data),countries:F(t.data),globalViewByCountries:V(t.data),initialized:!0});case"CHANGE_ACTIVE_TAB":return Object(i.a)({},e,{activeTab:t.activeTab,selectedCountry:t.selectedCountry?t.selectedCountry:e.selectedCountry});case"ADD_COUNTRY_TO_COMPARISON":return Object(i.a)({},e,{comparisonCountries:e.comparisonCountries.includes(t.country)?e.comparisonCountries:e.comparisonCountries.push(t.country)});case"REMOVE_COUNTRY_FROM_COMPARISON":return Object(i.a)({},e,{comparisonCountries:e.comparisonCountries.filter((function(e){return e!==t.country}))});case"UPDATE_CHART_THRESHOLD":return Object(i.a)({},e,{chartThreshold:t.newThreshold});default:return e}};a(69);s.a.render(o.a.createElement(p.a,{store:Object(K.c)(te,Object(K.a)(X.a))},o.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.ecb4242c.chunk.js.map