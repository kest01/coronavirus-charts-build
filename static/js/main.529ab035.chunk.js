(this["webpackJsonpcoronavirus-charts"]=this["webpackJsonpcoronavirus-charts"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"loadDataAction",(function(){return v})),a.d(r,"addCountryToComparisonAction",(function(){return C})),a.d(r,"removeCountryFromComparisonAction",(function(){return b})),a.d(r,"updateChartThresholdAction",(function(){return E}));var n=a(0),o=a.n(n),c=a(23),s=a.n(c),i=a(26),l=(a(56),a(10)),u=a(13),d=a(14),h=a(16),p=a(17),m=a(19),f=a(46),y=a.n(f),v=function(){return function(e){y.a.get("https://pomber.github.io/covid19/timeseries.json").then((function(t){var a=t.data;e({type:"LOAD_DATA_REQUEST",data:a})})).catch((function(e){console.log(e),alert("Error on loading data")}))}},C=function(e){return function(t){t({type:"ADD_COUNTRY_TO_COMPARISON",country:e})}},b=function(e){return function(t){t({type:"REMOVE_COUNTRY_FROM_COMPARISON",country:e})}},E=function(e){return function(t){t({type:"UPDATE_CHART_THRESHOLD",newThreshold:e})}},O=a(11),T=a(20),g=(a(78),a(30)),A=a(8),x=(a(82),function(e){return o.a.createElement("button",{title:"Add to comparison",className:"add-button",onClick:e.onClick},"+")}),j=(a(83),function(e){var t=parseInt(e);return isNaN(t)?e:t<0?t.toLocaleString("en-US"):0===t?"":"+"+t.toLocaleString("en-US")}),D=function(e){var t=parseInt(e);return isNaN(t)?e:t.toLocaleString("en-US")},N=[{Header:"Country",accessor:"country"},{Header:"Total cases",accessor:"total.confirmed",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"New cases",accessor:"last.confirmed",Cell:function(e){var t=e.cell;return j(t.value)}},{Header:"Total deaths",accessor:"total.deaths",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"Last deaths",accessor:"last.deaths",Cell:function(e){var t=e.cell;return j(t.value)}},{Header:"Total recovered",accessor:"total.recovered",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"Last recovered",accessor:"last.recovered",Cell:function(e){var t=e.cell;return j(t.value)}},{Header:"Total active",accessor:"total.active",Cell:function(e){var t=e.cell;return D(t.value)}},{Header:"Active change",accessor:"last.active",Cell:function(e){var t=e.cell;return j(t.value)}}];function k(e){var t=Object(g.useTable)({columns:N,data:e.data,initialState:{sortBy:[{id:"total.confirmed",desc:!0}]}},g.useSortBy),a=t.getTableProps,r=t.getTableBodyProps,n=t.headerGroups,c=t.rows,s=t.prepareRow;return o.a.createElement(o.a.Fragment,null,o.a.createElement("table",Object.assign({className:"ReactTable"},a()),o.a.createElement("thead",null,n.map((function(e){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return o.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),e.isSorted?e.isSortedDesc?o.a.createElement("span",{className:"sort-asc"}):o.a.createElement("span",{className:"sort-desc"}):"")})))}))),o.a.createElement("tbody",r(),c.map((function(t){return s(t),o.a.createElement("tr",t.getRowProps(),t.cells.map((function(t,a){return 0===a?o.a.createElement("td",t.getCellProps(),o.a.createElement(T.a,{className:"open-country-button",to:"/details?country=".concat(t.row.values.country)},t.render("Cell")),o.a.createElement(x,{onClick:function(){return e.addCountryToComparisonAction(t.row.values.country)}})):o.a.createElement("td",Object.assign({className:"global-table-column ".concat(0===t.value?"":"global-table-column-"+a)},t.getCellProps()),t.render("Cell"))})))})))),o.a.createElement("br",null))}var w=a(21),R=a.n(w),S=a(25),_=a.n(S),H=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){e.props.onChange(t.target.value)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.selected;return o.a.createElement("div",null,o.a.createElement("select",{defaultValue:a,onChange:this.handleChange},t.map((function(e){return o.a.createElement("option",{key:e},e)}))))}}]),a}(o.a.Component),I=a(50),P=["Russia","Ukraine","Belarus","US","Italy","Israel","China","Spain","Germany"],U=6e4*(new Date).getTimezoneOffset(),B=function(e){return Object.keys(e).forEach((function(t){e[t]=e[t].filter((function(e){return e.confirmed}))})),e},L=function(e){var t=[];return Object.keys(e).forEach((function(a){t.push(M(a,e[a]))})),Object(A.a)(t)},F=function(e){return Object(A.a)(Object.entries(e).map((function(e){return Object(I.a)(e,1)[0]})))},M=function(e,t){var a,r,n=t.slice(-2);return 2===n.length?(a=n[1],r=n[0]):(a=n[0],r={confirmed:0,recovered:0,deaths:0,active:0}),{country:e,total:Object(l.a)({},a,{active:V(a)}),last:{confirmed:a.confirmed-r.confirmed,deaths:a.deaths-r.deaths,recovered:a.recovered-r.recovered,active:V(a)-V(r)}}},V=function(e){return e.confirmed-e.recovered-e.deaths},G=function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.filter((function(e){return e.confirmed>r})).map((function(e){var r=[Date.parse(e.date?e.date:"")-U,t(e,a)];return a=e,r}))},W=function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.filter((function(e){return e.confirmed>r})).map((function(e,r){var n=[r,t(e,a)];return a=e,n}))},z=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleChangeCountry=function(e){r.setState({country:e})},r.state={country:e.country},r}return Object(d.a)(a,[{key:"render",value:function(){var e=[{title:{text:"Total Cases"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e){return e.confirmed}))}]},{title:{text:"Daily New Cases"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e,t){return e.confirmed-(t?t.confirmed:0)})),type:"column"}]},{title:{text:"Total cases chart"},xAxis:{type:"datetime"},chart:{type:"column"},plotOptions:{column:{stacking:"normal",pointWidth:10}},series:[{name:"Active",data:G(this.props.data[this.state.country],(function(e){return V(e)}))},{name:"Recovered",data:G(this.props.data[this.state.country],(function(e){return e.recovered})),color:"green"},{name:"Deaths",data:G(this.props.data[this.state.country],(function(e){return e.deaths})),color:"black"}]},{title:{text:"Active Cases"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e){return V(e)}))}]},{title:{text:"Daily Cases vs Daily Recovered"},xAxis:{type:"datetime",crosshair:!0},yAxis:[{title:{text:"Cases"}},{title:{text:"deaths"},opposite:!0}],series:[{name:"Recovered",data:G(this.props.data[this.state.country],(function(e,t){return e.recovered-(t?t.recovered:0)})),type:"column",color:"black",yAxis:1},{name:"New Cases",data:G(this.props.data[this.state.country],(function(e,t){return e.confirmed-(t?t.confirmed:0)}))}]},{title:{text:"Daily Cases vs Daily Deaths"},xAxis:{type:"datetime",crosshair:!0},yAxis:[{title:{text:"Cases"}},{title:{text:"deaths"},opposite:!0}],series:[{name:"Deaths",data:G(this.props.data[this.state.country],(function(e,t){return e.deaths-(t?t.deaths:0)})),type:"column",color:"black",yAxis:1},{name:"New Cases",data:G(this.props.data[this.state.country],(function(e,t){return e.confirmed-(t?t.confirmed:0)}))}]},{title:{text:"Daily New Deaths"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e,t){return e.deaths-(t?t.deaths:0)})),type:"column"}]},{title:{text:"Daily recovered"},xAxis:{type:"datetime"},series:[{name:this.state.country,data:G(this.props.data[this.state.country],(function(e,t){return e.recovered-(t?t.recovered:0)})),type:"column"}]}],t=0;return o.a.createElement("div",{className:"chart_container"},o.a.createElement(H,{items:this.props.countries,selected:this.state.country,onChange:this.handleChangeCountry}),o.a.createElement("br",null),e.map((function(e){return o.a.createElement(_.a,{key:t++,highcharts:R.a,options:e})})))}}]),a}(o.a.Component),Y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).updateChartThreshold=function(t){var a=parseFloat(t.target.value);isNaN(a)||e.props.updateChartThresholdAction(a)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=0,a=[{title:{text:"Total Cases (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e){return e.confirmed}),e.props.chartThreshold)}})).toArray()},{title:{text:"Daily Cases (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e,t){return e.confirmed-(t?t.confirmed:0)}),e.props.chartThreshold)}})).toArray()},{title:{text:"Active Cases (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e){return V(e)}),e.props.chartThreshold)}})).toArray()},{title:{text:"Total Deaths (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e){return e.deaths}),e.props.chartThreshold)}})).toArray()},{title:{text:"Daily Deaths (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e,t){return e.deaths-(t?t.deaths:0)}),e.props.chartThreshold)}})).toArray()},{title:{text:"Daily Recovers (after reaching ".concat(this.props.chartThreshold," cases)")},xAxis:{title:{text:"Days after reaching ".concat(this.props.chartThreshold," cases")},tickInterval:5},series:this.props.countries.map((function(t){return{name:t,data:W(e.props.data[t],(function(e,t){return e.recovered-(t?t.recovered:0)}),e.props.chartThreshold)}})).toArray()}];return this.props.countries.isEmpty()?o.a.createElement("h3",null,"Please select countries for comparison on another tabs"):o.a.createElement("div",{className:"chart_container"},this.props.countries.map((function(a){return o.a.createElement("div",{key:t++},o.a.createElement("span",{className:"comparison-county-label"},a),o.a.createElement("button",{title:"Remove country",className:"remove-county-button",onClick:function(){return e.props.removeCountryFromComparisonAction(a)}},o.a.createElement("svg",{width:"8",height:"10",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("line",{x1:"1",y1:"7",x2:"7",y2:"1",stroke:"red",strokeWidth:"1"}),o.a.createElement("line",{x1:"1",y1:"1",x2:"7",y2:"7",stroke:"red",strokeWidth:"1"}))))})),o.a.createElement("br",null),o.a.createElement("span",null,"Zero point"),o.a.createElement("input",{className:"chart-threshold-input",defaultValue:this.props.chartThreshold,onChange:this.updateChartThreshold}),o.a.createElement("span",null,"cases"),o.a.createElement("br",null),a.map((function(e){return o.a.createElement(_.a,{key:t++,highcharts:R.a,options:e})})))}}]),a}(o.a.Component),J=function(e){return o.a.createElement(O.d,{selectedIndex:e.store.activeTab,onSelect:function(){}},o.a.createElement(O.b,null,o.a.createElement(O.a,null,o.a.createElement(T.a,{to:"/",id:"tab-link-0"},"Global view")),o.a.createElement(O.a,null,o.a.createElement(T.a,{to:"/favorite",id:"tab-link-1"},"Favorite countries")),o.a.createElement(O.a,null,o.a.createElement(T.a,{to:"/details",id:"tab-link-2"},"Details")),o.a.createElement(O.a,null,o.a.createElement(T.a,{to:"/comparison",id:"tab-link-3"},"Comparison"))),o.a.createElement(O.c,null,o.a.createElement(k,{data:e.store.globalViewByCountries,addCountryToComparisonAction:e.addCountryToComparisonAction})),o.a.createElement(O.c,null,o.a.createElement(k,{data:(t=e.store.globalViewByCountries,t.filter((function(e){return P.includes(e.country)}))),addCountryToComparisonAction:e.addCountryToComparisonAction})),o.a.createElement(O.c,null,o.a.createElement(z,{countries:e.store.countries,country:e.store.selectedCountry,data:e.store.data})),o.a.createElement(O.c,null,o.a.createElement(Y,{countries:e.store.comparisonCountries,data:e.store.data,removeCountryFromComparisonAction:e.removeCountryFromComparisonAction,chartThreshold:e.store.chartThreshold,updateChartThresholdAction:e.updateChartThresholdAction})));var t},Q=(a(85),function(e){return o.a.createElement("div",{id:"cube-loader"},o.a.createElement("div",{className:"caption"},o.a.createElement("div",{className:"cube-loader"},o.a.createElement("div",{className:"cube loader-1"}),o.a.createElement("div",{className:"cube loader-2"}),o.a.createElement("div",{className:"cube loader-4"}),o.a.createElement("div",{className:"cube loader-3"}))))}),Z=(a(86),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadDataAction()}},{key:"render",value:function(){return this.props.store.initialized?o.a.createElement("div",{className:"App"},o.a.createElement(J,this.props)):o.a.createElement(Q,null)}}]),a}(o.a.Component)),$=Object(l.a)({},r),q=Object(m.c)((function(e){return Object(l.a)({},e)}),$,(function(e,t){return Object(l.a)({},e,{},t)}))(Z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(18),X=a(48),ee=a(49),te=a.n(ee),ae={data:Object(A.a)(),countries:Object(A.a)(),globalViewByCountries:Object(A.a)(),initialized:!1,activeTab:0,chartThreshold:100,selectedCountry:"Russia",comparisonCountries:Object(A.a)()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATA_REQUEST":return Object(l.a)({},e,{data:B(t.data),countries:F(t.data),globalViewByCountries:L(t.data),initialized:!0});case"@@router/LOCATION_CHANGE":var a=ne(t.payload.location.pathname),r=2===a?te.a.parse(t.payload.location.search).country:void 0;return Object(l.a)({},e,{activeTab:a,selectedCountry:r||e.selectedCountry});case"ADD_COUNTRY_TO_COMPARISON":return Object(l.a)({},e,{comparisonCountries:e.comparisonCountries.includes(t.country)?e.comparisonCountries:e.comparisonCountries.push(t.country)});case"REMOVE_COUNTRY_FROM_COMPARISON":return Object(l.a)({},e,{comparisonCountries:e.comparisonCountries.filter((function(e){return e!==t.country}))});case"UPDATE_CHART_THRESHOLD":return Object(l.a)({},e,{chartThreshold:t.newThreshold});default:return e}},ne=function(e){switch(e){case"/":return 0;case"/favorite":return 1;case"/details":return 2;case"/comparison":return 3;default:return 0}},oe=a(44),ce=a(5),se=Object(ce.a)();a(99);s.a.render(o.a.createElement(m.a,{store:function(e){return Object(K.d)((t=se,Object(K.c)({router:Object(i.b)(t),store:re})),e||{store:ae},Object(K.a)(Object(oe.a)(se),X.a));var t}()},o.a.createElement(i.a,{history:se},o.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,a){e.exports=a(100)},56:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.529ab035.chunk.js.map